\begin{algorithmic}
\Function{getNodes}{$S, A, w, z$}
    \If{($S$ is pop state)}
        \State $x \gets \textbf{getNodeP}(S, A, w, z)$
    \Else
        \State $x \gets \$ $
    \EndIf
    \Statex
    \If{$S.outedges = \varnothing$}
        \State $y \gets \$$
    \Else
        \If{($isFiR[S][A]$)}
            \State $y \gets z$
        \Else
            \State $y \gets \textbf{getNodeP}(S, S, w, z)$
        \EndIf
    \EndIf
    
    \State \Return{$(y,x)$}
\EndFunction   
\end{algorithmic}